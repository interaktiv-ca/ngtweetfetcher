function tweetFactoryFunc(e,t,n,a,r){function i(e){d.maxTweets=e}function s(e){d.showReTweets=e}function l(e,t,n,a){this.profileName=e,this.userName=t,this.profileURL=n,this.imageURL=a}function c(e,t,n,a,r){this.id=e,this.url=t,this.tweetHtml=n,this.dateVO=a,this.authorVO=r}function w(e){this.dateHtml=e}function o(e){var t=document.createElement("div");t.innerHTML=e.body;for(var n=t.getElementsByClassName("tweet"),a=n.length>d.maxTweets&&d.maxTweets?d.maxTweets:n.length,r=0;a>r;){var i=n[r].getElementsByClassName("retweet-credit").length>0?!0:!1;if(!i||d.showReTweets){var s=n[r].getElementsByClassName("e-entry-title")[0],l=n[r].getElementsByClassName("dt-updated")[0];u(l,"abbr");var o=n[r].getElementsByClassName("p-author")[0],h=n[r].getAttribute("data-tweet-id"),T=n[r].getElementsByClassName("permalink")[0].href,g=new w(l.innerText),f=m(o);p.push(new c(h,T,s.innerHTML,g,f)),r++}else a<n.length&&a++,r++}return p}function m(e){var t=e.getElementsByClassName("p-name")[0].innerText,n=e.getElementsByClassName("p-nickname")[0].innerText,a=e.getElementsByTagName("img")[0].getAttribute("data-src-2x"),r=e.getElementsByTagName("a")[0].href;return new l(t,n,r,a)}function u(e,t){for(var n=e.innerText,a=e.getElementsByTagName(t),r=0;r<a.length;)n=n.replace(a[r].innerText,""),r++;return n}function h(e){return p=o(e)}var d=this,p=[];return{tweets:[],setMaxTweets:i,setShowReTweets:s,parse:h}}function tweetServiceFunc(e,t){function n(n){var i=r+n+"?";return e.jsonp(i,a).then(function(e){return"object"==typeof e.data?e.data:t.reject(e.data)},function(e){return t.reject(e.data)})}var a={params:{lang:"en",suppress_response_codes:!0,rnd:Math.random(),callback:"JSON_CALLBACK"}},r="https://cdn.syndication.twimg.com/widgets/timelines/";return{load:n}}function tweetTimelineFunc(){return{restrict:"AECM",bindToController:!0,controllerAs:"vm",templateUrl:"templates/tweetTimeline.template.html",replace:!0,scope:{twitterId:"@",maxTweets:"@",showReTweets:"=?",isTicker:"=?",interval:"@"},controller:"TweetTimelineCtrl"}}function timelineTweetFunc(e){return{restrict:"E",replace:!0,scope:{tweet:"="},templateUrl:"templates/timelineTweet.template.html",compile:function(e,t){return{post:function(e,t,n){var a=t[0].getElementsByTagName("p")[0];a.innerHTML=e.tweet.tweetHtml}}}}}function tweetTimelineControllerFunc(e,t,n,a){var r=this;r.showReTweets=angular.isDefined(r.showReTweets)?r.showReTweets:!0,r.maxTweets=angular.isDefined(r.maxTweets)?r.maxTweets:0,r.isTicker=angular.isDefined(r.isTicker)?r.isTicker:!1,r.interval=angular.isDefined(r.interval)?r.interval:2e3,n.setMaxTweets(r.maxTweets),n.setShowReTweets(r.showReTweets),a.load(r.twitterId).then(function(e){r.tweets=n.parse(e),r.isTicker&&setInterval(r.refresh,r.interval)}),r.activeTweet=0,r.setTickerActive=function(e){return r.isTicker?e==r.activeTweet?1:0:!0},r.refresh=function(){e.$apply(function(){r.activeTweet++,r.activeTweet>=r.tweets.length&&(r.activeTweet=0)})}}angular.module("ng.tweetfetcher",[]),angular.module("ng.tweetfetcher").factory("TweetFactory",["$document","$http","$log","$q","$window",tweetFactoryFunc]),angular.module("ng.tweetfetcher").factory("TweetService",["$http","$q",tweetServiceFunc]),angular.module("ng.tweetfetcher").directive("tweetTimeline",["TweetFactory","TweetService",tweetTimelineFunc]),angular.module("ng.tweetfetcher").directive("timelineTweet",["$compile",timelineTweetFunc]),angular.module("ng.tweetfetcher").controller("TweetTimelineCtrl",["$scope","$http","TweetFactory","TweetService",tweetTimelineControllerFunc]),angular.module("ng.tweetfetcher").run(["$templateCache",function(e){e.put("templates/timelineTweet.template.html",'<li class="tweet-item">\n\n    <div class="tweet-content">\n        <div class="tweet-header">\n            <div class="tweet-avatar">\n                <a ng-href="{{tweet.authorVO.profileURL}}"\n                   data-scribe="element:user_link" target="_blank">\n                    <img class="tweet-img" alt="" data-scribe="element:avatar" ng-src="{{tweet.authorVO.imageURL}}">\n                </a>\n            </div>\n            <span>\n                <span><a ng-href="{{tweet.authorVO.profileURL}}" data-scribe="element:name">{{tweet.authorVO.profileName}}</a></span>\n                <span><a ng-href="{{tweet.authorVO.profileURL}}" data-scribe="element:screen_name">{{tweet.authorVO.userName}}</a></span>\n            </span>\n            <span class="tweetTimePosted"><a ng-href="{{tweet.url}}">{{ tweet.dateVO.dateHtml }}</a></span>\n        </div>\n\n\n        <p class="tweet-text"></p>\n        <a class="tweet-expand" ng-href="{{ tweet.url }}"><b>Expand</b></a>\n    </div>\n    </div>\n <!--   TODO add show controls option -->\n<!--    <div class="tweet-interact">\n\n        <a ng-href="https://twitter.com/intent/tweet?in_reply_to={{ tweet.id }}" class="twitter_reply_icon" target="_blank">Reply</a>\n        <a ng-href="https://twitter.com/intent/retweet?tweet_id={{ tweet.id }}" class="twitter_retweet_icon" target="_blank">Retweet</a>\n        <a ng-href="https://twitter.com/intent/favorite?tweet_id={{ tweet.id }}" class="twitter_fav_icon" target="_blank">Favorite</a>\n\n    </div>-->\n\n</li>')}]),angular.module("ng.tweetfetcher").run(["$templateCache",function(e){e.put("templates/tweetTimeline.template.html","<ol class=\"tweet-list\" >\n\n    <timeline-tweet ng-show=\"vm.setTickerActive($index)\" ng-repeat='tweet in vm.tweets track by $index'  tweet='tweet'>\n    </timeline-tweet>\n</ol>\n\n")}]);